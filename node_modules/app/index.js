'use strict';
var OptionsStrategy = require('app/OptionsStrategy');
var BlackScholes = require('app/BlackScholes');

// http://caolan.org/posts/writing_for_node_and_the_browser/
(function(exports){

   exports.margin = function(portfolio,S,Tmt){
    // portfolio: [{q: 1, t:'P', X:80, r:0, v:0.25, T:0, V:2.12}]
    // S: 60 or [60,80,100,120]
    // Tmt: 0 or [0,0.1,0.2]
      var p2 = portfolio.map(function(x) {
        return {
          q: x.q,
          o: new BlackScholes(
            x.t, x.X, x.r, x.v, x.T,
            x.hasOwnProperty("V")?x.V:undefined
          )
        };
      });
      var bs1=new OptionsStrategy(p2);
      var x=bs1.margin(S,Tmt);
      return x;
    };

})(typeof exports === 'undefined'? this['OptStratVis']={}: exports);

